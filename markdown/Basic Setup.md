
# Подготовка

- [Подготовка](#подготовка)
  - [Компилятор](#компилятор)
    - [Работа компилятора](#работа-компилятора)
      - [Препроцессинг](#препроцессинг)
      - [Компиляция](#компиляция)
      - [Сборка](#сборка)
  - [Среда разработки](#среда-разработки)
  - [Сноски](#сноски)

## Компилятор

C++ компиляторы можно разделить на две категории: компиляторы и интерпретаторы. Компиляторы преобразуют исходный код в машинный код, а интерпретаторы выполняют код напрямую. В этом репозитории я буду использовать компиляторы, так как они более быстрые и эффективные.

От компилятора зависят несколько аспектор написания кода на языке C++, таких как:

- Стандарт языка, который используется
- Способность компилятора оптимизировать код
- Способность компилятора обнаруживать ошибки в коде
- Генерация отладочной информации
- Возможность генерировать код для различных архитектур
- и т.д.

| Имя     | Описание                                                  | Ссылка                                                                 |
| ------- | --------------------------------------------------------- | ---------------------------------------------------------------------- |
| GCC     | GNU Compiler Collection                                   | [Ссылка](https://gcc.gnu.org/)                                         |
| Clang   | C language family frontend for LLVM                       | [Ссылка](https://clang.llvm.org/)                                      |
| MSVC    | Microsoft Visual C++                                      | [Ссылка](https://visualstudio.microsoft.com/ru/vs/features/cplusplus/) |
| MinGW   | Minimalist GNU for Windows                                | [Ссылка](https://www.mingw-w64.org/)                                   |
| TDM-GCC | TDM-GCC is a distribution of the GCC compiler for Windows | [Ссылка](https://jmeubank.github.io/tdm-gcc/)                          |
| Cygwin  | Cygwin is a POSIX-compatible environment for Windows      | [Ссылка](https://www.cygwin.com/)                                      |

Отдельно хочется отметить:

1. `MSVC` - компилятор, который поставляется вместе с Visual Studio. Он не является свободным, но в нем есть все необходимые инструменты для разработки на C++. Так же он полностью поддерживает стандарт языка C++20.
2. `MinGW` - компилятор, созданный в качестве альтернативы `gcc`. Он полностью совместим с `gcc`, но имеет некоторые отличия. Он так же частично поддерживает стандарт языка C++20.
3. `TDM-GCC` - идет в коробке с операционной системой [TDM-GCC](https://jmeubank.github.io/tdm-gcc/). Он полностью совместим с `gcc`, но имеет некоторые отличия. Он так же частично поддерживает стандарт языка C++20.
4. `Cygwin` - это среда, которая позволяет запускать программы, написанные на C++ под Windows.

Мы будем использовать `MSVC` для разработки на C++, так как он полностью поддерживает наисвежайший стандарт языка C++20.

### Работа компилятора

Компилятор преобразует исходный код на языке C++ в машинный код, который может быть исполнен на процессоре. Этот процесс состоит из нескольких[^1] этапов:

1. Препроцессинг - здесь происходит подстановка макросов, включение заголовочных файлов и т.д.
2. Компиляция - здесь происходит преобразование исходного кода в ассемблерный код в зависимости от архитектуры процессора. В итоге после этого этапа мы получаем файл с расширением `.obj` (для Windows) или `.o` (для Linux), являющийся объектным файлом.
3. Сборка - здесь происходит сборка объектных файлов в исполняемый файл (А так же происходит линковка с библиотеками). В итоге после этого этапа мы получаем исполняемый файл с расширением `.exe` (для Windows) или `.out` (для Linux).

#### Препроцессинг

Препроцессинг - это первый этап компиляции. Здесь происходит подстановка макросов, таких как `#define`, включение заголовочных файлов (например `#include <iostream>`), а так же происходит удаление комментариев. После этого этапа мы получаем файл с расширением `.i` (для Windows) или `.ii` (для Linux).

#### Компиляция

Компиляция - это второй этап компиляции. Здесь происходит преобразование исходного кода в ассемблерный код в зависимости от архитектуры процессора. После этого этапа мы получаем файл с расширением `.s` (для Windows) или `.s` (для Linux).

Она происходит так же в несколько этапов:

1. Первый этап - здесь происходит преобразование исходного кода в абстрактное синтаксическое дерево (AST). Это дерево содержит в себе все токены и их связи между собой.
2. Второй этап - здесь происходит преобразование AST в промежуточное представление (IR). Это представление содержит в себе все токены, но уже в виде инструкций, которые можно выполнить на процессоре.
3. Третий этап - здесь происходит преобразование IR в ассемблерный код. Это преобразование происходит в зависимости от архитектуры процессора.

#### Сборка

Сборка - это третий этап компиляции. Здесь происходит сборка файлов в исполняемый файл в ~3 этапа:

1. Первый этап - здесь происходит линковка с библиотеками. Это нужно для того, чтобы исполняемый файл мог использовать функции из библиотек.
2. Второй этап - здесь происходит оптимизация исполняемого файла. Это нужно для того, чтобы исполняемый файл был максимально оптимизирован для работы на процессоре.
3. Третий этап - здесь происходит генерация исполняемого файла. Это преобразование происходит в зависимости от архитектуры процессора.

## Среда разработки

Среда разработки - это инструмент, который позволяет нам писать код, компилировать его и запускать. В среде разработки мы можем увидеть ошибки в коде, а так же удобно писать код.

| Имя           | Описание                                                                   | Ссылка                                                                 |
| ------------- | -------------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| VSCode        | Visual Studio Code - это легкий, но мощный редактор кода для разработчиков | [Ссылка](https://code.visualstudio.com/)                               |
| CLion         | CLion - это интегрированная среда разработки для C и C++                   | [Ссылка](https://www.jetbrains.com/ru-ru/clion/)                       |
| Eclipse       | Eclipse - это интегрированная среда разработки для C и C++                 | [Ссылка](https://www.eclipse.org/downloads/packages/release/2020-09/r) |
| Visual Studio | Visual Studio - это интегрированная среда разработки для C и C++           | [Ссылка](https://visualstudio.microsoft.com/ru/vs/)                    |

Мы будем использовать `VSCode` для разработки на C++, так как он достаточно легок, но его функционал можно свободно расширять при помощи различных плагинов.

## Сноски

[^1]: Более точну вресию на английском языке можно найти [здесь](https://raw.githubusercontent.com/NiekBeijloos/Compilation-process/main/Compilation%20process.svg)
