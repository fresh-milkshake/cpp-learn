
# Макросы

- [Макросы](#макросы)
  - [Что это?](#что-это)
  - [Как они создаются?](#как-они-создаются)
    - [C-style макросы](#c-style-макросы)
    - [C++11 макросы](#c11-макросы)

## Что это?

Макросы - это специальные функции, которые могут быть вызваны в любом месте вашего кода. Они могут принимать аргументы и возвращать значения. Но их особенность в реализации парадигмы [метапрограммирования](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%82%D0%B0%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5). Макросы нужны для тех целей, когда необходимо писать код, который генерирует код. Это может быть полезно, если вы хотите создать функцию, которая принимает несколько аргументов, но возвращает только одно значение. Макросы также могут быть использованы для создания специальных функций, которые могут быть вызваны во время выполнения программы.

> Макросы являются специальными функциями, которые вызываются во время компиляции, а не во время выполнения. Это означает, что во время выполнения программы макросы не существуют.

Существует несколько макросов, которые предоставляет язык, но вы можете создавать свои собственные макросы. Мы будем использовать макросы, чтобы создать функцию, которая принимает несколько аргументов, но возвращает только одно значение.

> Макросы предоставляются в стандартной библиотеке, и вы можете использовать их в своих проектах. Однако, они не являются частью языка, и не гарантируются в будущих версиях языка.

## Как они создаются?

В C++ существует два типа макросов: макросы функций и макросы объектов. Макросы функций работают так же, как и обычные функции, но они вызываются во время компиляции. Макросы объектов работают похоже на константы, но они могут быть использованы вместо выражений. Например, вы можете использовать макросы объектов вместо литералов, чтобы упростить ваш код.

> Макросы функций и макросы объектов отличаются тем, как они вызываются. Макросы объектов вызываются во время компиляции, а макросы функций вызываются во время выполнения. Поэтому, макросы функций работают с переменными, а макросы объектов - с литералами.

Макросы функций и макросы объектов создаются по-разному. Макросы функций создаются с помощью директивы `#define`, а макросы объектов создаются с помощью ключевого слова `constexpr`. Давайте рассмотрим их подробнее.

### C-style макросы

Макросы функций создаются с помощью директивы `#define`. Это директива, которая создает макросы. После ключевого слова `#define` идет имя макроса, за которым следует список аргументов в круглых скобках. После списка аргументов идет тело макроса, которое будет возвращено, когда макрос будет вызван. Например:

`#define ADD(x, y) x + y`

Это определение макроса функции, которое создает макрос с именем `ADD`. Этот макрос принимает два аргумента, которые называются `x` и `y`. Тело макроса возвращает сумму двух аргументов. Теперь вы можете использовать этот макрос, как будто это обычная функция:

`int a = 10;`  
`int b = 20;`  
`int c = ADD(a, b);`

В этом коде переменная `c` будет равна 30. Это потому, что макрос `ADD` будет заменен на `a + b` во время компиляции. После компиляции этот код будет выглядеть примерно так:

`int a = 10;`  
`int b = 20;`  
`int c = a + b;`

Как видите, макрос `ADD` был заменен на сумму двух переменных. Таким образом, макросы функций работают как функции, но они вызываются во время компиляции.

### C++11 макросы

Макросы объектов создаются с помощью ключевого слова `constexpr`. Это ключевое слово используется для создания констант. После ключевого слова `constexpr` идет имя макроса, за которым следует список аргументов в круглых скобках. После списка аргументов идет тело макроса, которое будет возвращено, когда макрос будет вызван. Например:

`constexpr int ADD(int x, int y) {`  
`return x + y;`  
`}`

Это определение макроса объекта, которое создает макрос с именем `ADD`. Этот макрос принимает два аргумента, которые называются `x` и `y`. Тело макроса возвращает сумму двух аргументов. Теперь вы можете использовать этот макрос, как будто это обычная функция:

`int a = 10;`  
`int b = 20;`  
`int c = ADD(a, b);`

В этом коде переменная `c` будет равна 30. Это потому, что макрос `ADD` будет заменен на `x + y` во время компиляции. После компиляции этот код будет выглядеть примерно так:

`int a = 10;`  
`int b = 20;`  
`int c = 10 + 20;`

Как видите, макрос `ADD` был заменен на сумму двух констант. Таким образом, макросы объектов работают как функции, но они вызываются во время компиляции.
